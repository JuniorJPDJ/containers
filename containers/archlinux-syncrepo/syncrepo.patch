--- syncrepo-template.sh
+++ syncrepo
@@ -27,7 +27,7 @@
 # lot of traffic.
 
 # Directory where the repo is stored locally. Example: /srv/repo
-target=""
+target="/var/mirror/$TARGETDIR"
 
 # Lockfile path
 lock="/var/lock/syncrepo.lck"
@@ -35,19 +35,19 @@
 # If you want to limit the bandwidth used by rsync set this.
 # Use 0 to disable the limit.
 # The default unit is KiB (see man rsync /--bwlimit for more)
-bwlimit=0
+bwlimit="$BWLIMIT"
 
 # The source URL of the mirror you want to sync from.
 # If you are a tier 1 mirror use rsync.archlinux.org, for example like this:
 # rsync://rsync.archlinux.org/ftp_tier1
 # Otherwise chose a tier 1 mirror from this list and use its rsync URL:
 # https://www.archlinux.org/mirrors/
-source_url=''
+source_url="$SOURCE_URL"
 
 # An HTTP(S) URL pointing to the 'lastupdate' file on your chosen mirror.
 # If you are a tier 1 mirror use: https://rsync.archlinux.org/lastupdate
 # Otherwise use the HTTP(S) URL from your chosen mirror.
-lastupdate_url=''
+lastupdate_url="$LAST_UPDATE_URL"
 
 #### END CONFIG
 
@@ -68,7 +68,7 @@
 	if stty &>/dev/null; then
 		cmd+=(-h -v --progress)
 	else
-		cmd+=(--quiet)
+		cmd+=(-v)
 	fi
 
 	if ((bwlimit>0)); then
@@ -80,9 +80,9 @@
 
 
 # if we are called without a tty (cronjob) only run when there are changes
-if ! tty -s && [[ -f "$target/lastupdate" ]] && diff -b <(curl -Ls "$lastupdate_url") "$target/lastupdate" >/dev/null; then
+if ! stty &>/dev/null && [[ -f "$target/lastupdate" ]] && diff -b <(curl -Ls "$lastupdate_url") "$target/lastupdate" >/dev/null; then
 	# keep lastsync file in sync for statistics generated by the Arch Linux website
-	rsync_cmd "$source_url/lastsync" "$target/lastsync"
+	rsync_cmd "$source_url/lastsync" "$target/lastsync" &>/dev/null
 	exit 0
 fi
 
@@ -93,4 +93,4 @@
 	"${source_url}" \
 	"${target}"
 
-#echo "Last sync was $(date -d @$(cat ${target}/lastsync))"
+echo "Last sync was $(date -d @$(cat ${target}/lastsync))"
